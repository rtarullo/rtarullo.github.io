YUI.add("hermes-template-photo-ad-page",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return u={hash:{},data:i},s+=f((o=n.outlet||t.outlet,o?o.call(t,t["global-nav-view"],u):a.call(t,"outlet",t["global-nav-view"],u)))+"\n",u={hash:{},data:i},s+=f((o=n.outlet||t.outlet,o?o.call(t,t["photo-well-view"],u):a.call(t,"outlet",t["photo-well-view"],u)))+"\n",u={hash:{},data:i},s+=f((o=n.outlet||t.outlet,o?o.call(t,t["sidebar-view"],u):a.call(t,"outlet",t["sidebar-view"],u))),s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/photo-ad-page",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-sub-photo-ad",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function d(e,t){var r="",i;return r+='width="',(i=n.customBrandIconWidth)?i=i.call(e,{hash:{},data:t}):(i=e.customBrandIconWidth,i=typeof i===f?i.apply(e):i),r+=l(i)+'"',r}function v(e,t){var r="",i;return r+='height="',(i=n.customBrandIconHeight)?i=i.call(e,{hash:{},data:t}):(i=e.customBrandIconHeight,i=typeof i===f?i.apply(e):i),r+=l(i)+'"',r}function m(e,t){var r="",i,s;return r+='\n		<a href="'+l((i=(i=e.ad,i==null||i===!1?i:i.clickUrl),typeof i===f?i.apply(e):i))+'" class="find-out-more" data-track="ad_link_rail_panel" target="_blank">\n		   	Find out more at ',s={hash:{},data:t},r+=l((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,(i=e.ad,i==null||i===!1?i:i.brand),s):c.call(e,"renderTrustedMarkup",(i=e.ad,i==null||i===!1?i:i.brand),s)))+"\n		</a>\n		",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing,h=this,p=n.blockHelperMissing;s+='<div class="sub-photo-container centered-content">\n    <div class="view sub-photo-left-view">\n	    <div class="attribution-view photo-attribution">\n\n	        <a class="attribution-icon no-menu circle-icon" href="'+l((o=(o=t.ad,o==null||o===!1?o:o.clickUrl),typeof o===f?o.apply(t):o))+'" data-track="ad_link_rail_icon" target="_blank">\n	    		<img src="'+l((o=(o=t.ad,o==null||o===!1?o:o.buddyicon),typeof o===f?o.apply(t):o))+'" ',u=n["if"].call(t,t.customBrandIconWidth,{hash:{},inverse:h.noop,fn:h.program(1,d,i),data:i});if(u||u===0)s+=u;s+=" ",u=n["if"].call(t,t.customBrandIconHeight,{hash:{},inverse:h.noop,fn:h.program(3,v,i),data:i});if(u||u===0)s+=u;s+='></a>\n\n	        <div class="attribution-info">\n	            <a href="'+l((o=(o=t.ad,o==null||o===!1?o:o.clickUrl),typeof o===f?o.apply(t):o))+'" class="owner-name truncate" title="',a={hash:{},data:i},s+=l((o=n.renderTrustedMarkup||t.renderTrustedMarkup,o?o.call(t,(o=t.ad,o==null||o===!1?o:o.brand),a):c.call(t,"renderTrustedMarkup",(o=t.ad,o==null||o===!1?o:o.brand),a)))+'" target="_blank">',a={hash:{},data:i},s+=l((o=n.renderTrustedMarkup||t.renderTrustedMarkup,o?o.call(t,(o=t.ad,o==null||o===!1?o:o.brand),a):c.call(t,"renderTrustedMarkup",(o=t.ad,o==null||o===!1?o:o.brand),a)))+'</a>\n	            <a href="'+l((o=(o=t.ad,o==null||o===!1?o:o.clickUrl),typeof o===f?o.apply(t):o))+'" class=\'ui-button ui-button-minimal\' data-track="ad_link_rail_button" target="_blank"><span>Sponsored</span></a>\n	        </div>\n	    </div>\n		<div class="view sub-photo-title-desc-view" id="yui_3_16_0_rc_1_1_1401741750198_2372">\n			<div class="title-desc-block">\n\n				<span class=" meta-field photo-title ">\n						',a={hash:{},data:i},s+=l((o=n.renderTrustedMarkup||t.renderTrustedMarkup,o?o.call(t,(o=t.ad,o==null||o===!1?o:o.headline),a):c.call(t,"renderTrustedMarkup",(o=t.ad,o==null||o===!1?o:o.headline),a)))+'\n				</span>\n\n				<span class=" meta-field photo-desc ">\n						',a={hash:{},data:i},s+=l((o=n.renderTrustedMarkup||t.renderTrustedMarkup,o?o.call(t,(o=t.ad,o==null||o===!1?o:o.summary),a):c.call(t,"renderTrustedMarkup",(o=t.ad,o==null||o===!1?o:o.summary),a)))+'\n				</span>\n\n			</div>\n		</div>\n	</div>\n	<div class="view sub-photo-right-view">\n		',a={hash:{},inverse:h.program(5,m,i),fn:h.noop,data:i},(u=n.adsTypeB)?u=u.call(t,a):(u=t.adsTypeB,u=typeof u===f?u.apply(t):u),n.adsTypeB||(u=p.call(t,u,a));if(u||u===0)s+=u;return s+='\n	</div>\n	<div style="clear: both;"></div>\n</div>',s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/sub-photo-ad",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("sub-photo-ad-view",function(e){e.FlickrView.create(this.name,e.FlickrView,[],{initializer:function(e){return this.nsid=e.nsid,this.photoId=e.photoId,this.backToURL=e.backToURL,this.adJSON=this.appContext.adManager.getAdJSON(),this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this},subviewConfig:{"sub-photo-left-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"sub-photo-right-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0}},loadState:function(){return e.Promise.resolve()},buildContainer:function(){var e,t={height:50,width:50};return e=this.templates("sub-photo-ad")({ad:this.adJSON,previous:this.appContext.adManager.origin.arrow==="next"?this.appContext.adManager.context.current:this.appContext.adManager.context.previous,next:this.appContext.adManager.origin.arrow==="next"?this.appContext.adManager.context.next:this.appContext.adManager.context.current,adsTypeB:this.appContext.flipper.isFlipped("moneyball-ads-type-b"),customBrandIconHeight:t.height,customBrandIconWidth:t.width}),this.setContainerHTML(e),this},buildErrorContainer:function(){},activate:function(){return this}})},"@VERSION@",{requires:["flickr-view","hermes-template-sub-photo-ad","sub-photo-ad-css","url-helper"],optional:["sub-photo-left-view","sub-photo-right-view"]});
YUI.add("photo-page-ad-scrappy-view",function(e){e.FlickrView.create(this.name,e.FlickrView,[],{initializer:function(t){return this.backToURL=t.backToURL,this.entryTypeIntlKey=t.entryTypeIntlKey,this.photoId=t.photoId,this.isOwner=t.isOwner,this.context=e.clone(t.context,!0),t.isOwner=this.isOwner,t.fullscreen?this.appContext.experiments.fullscreen.enableFullscreen():this.appContext.experiments.fullscreen.disableFullscreen(),this.appContext.getViewer().signedIn&&(t.signinPendingQueue=e.SigninHelper.checkPendingQueue(this.appContext)),this.appContext.getModel("photo-models",this.photoId).then(function(t){t.on("valuesChanged",function(t){t.title&&e.one("head title").set("text",t.title.newVal+" | Flickr - Photo Sharing!")})}),this},subviewConfig:{"photo-well-scrappy-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,dealbreaker:!0},"photo-head-meta-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0},"global-nav-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0},"sub-photo-ad-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"footer-full-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0}},additionalViewClasses:function(){var e=[];return!this.appContext.getViewer().signedIn&&this.appContext.flipper.isFlipped("global-nav-enabled")&&e.push("has-global-nav"),e},buildContainer:function(){var t,n,r,i,s=!1,o=this.subviews["photo-well-scrappy-view"].get("container");try{r=this.appContext.adManager.getAdJSON(),n=r.clickUrl}catch(u){e.Flog.fatal("There was a problem processing the ad payload",{error:u,payload:r}),n="#"}return s?i="":i=this.subviews["global-nav-view"].get("container"),t=this.templates("photo-page-scrappy")({"photo-well-view":o,"global-nav-view":i,"sub-photo-view":this.subviews["sub-photo-ad-view"].get("container"),"footer-full-view":this.subviews["footer-full-view"]?this.subviews["footer-full-view"].get("container"):""}),this.setContainerHTML(t),this},activate:function(){return this.appContext.adManager.adIsLoading(),this.setupPerformanceMetrics(),this},setupPerformanceMetrics:function(){}},{ATTRS:{spaceid:{value:792600517}}})},"@VERSION@",{requires:["flog","flickr-view","hermes-template-photo-ad-page","photo-ad-css","util-css","fletrics","signin-helper","dialog"],optional:["photo-well-view","sub-photo-ad-view","global-nav-view"]});
