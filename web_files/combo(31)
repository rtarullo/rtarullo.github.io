YUI.add("contact-models",function(e){"use strict";function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{pathAlias:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)||undefined},defaultFn:function(e){return e}},username:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)}},realname:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)}},displayname:{readOnly:!0,derivedBy:["username","realname"],getter:function(e,t){return this.getValue(t,"realname")||this.getValue(t,"username")}},iconfarm:{},iconserver:{},buddyicon:{readOnly:!0,derivedBy:["iconfarm","iconserver","nsid"],getter:function(t,n){var r=this.getValue(n,"iconfarm"),i=this.getValue(n,"iconserver"),s=this.getValue(n,"nsid");return e.URLHelper.getBuddyIconURL(s,r,i)}},nsid:{readOnly:!0,defaultFn:function(e){return e}},isMe:{readOnly:!0,defaultFn:function(e){var t=this.appContext.getViewer();return t.signedIn&&t.nsid===e}},isPro:{defaultValue:!1,setter:function(t){return e.AttributeHelpers.coerceBoolean(t)}},profileURL:{readOnly:!0,derivedBy:["pathAlias","nsid"],defaultFn:function(e){var t=this.getValue(e,"pathAlias");return t||(t=e),"/photos/"+t}},followsURL:{readOnly:!0,derivedBy:["pathAlias","nsid"],defaultFn:function(e){var t=this.getValue(e,"pathAlias");return t||(t=e),"/people/"+t+"/contacts"}}}})},"@VERSION@",{requires:["flickr-model-registry","attribute-helpers","url-helper"]});
YUI.add("search-contact-models",function(e){"use strict";function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{pathAlias:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)||undefined},defaultFn:function(e){return e}},username:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)}},realname:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)}},displayname:{readOnly:!0,derivedBy:["username","realname"],getter:function(e,t){return this.getValue(t,"realname")||this.getValue(t,"username")}},iconfarm:{},iconserver:{},buddyicon:{readOnly:!0,derivedBy:["iconfarm","iconserver","nsid"],getter:function(t,n){var r=this.getValue(n,"iconfarm"),i=this.getValue(n,"iconserver"),s=this.getValue(n,"nsid");return e.URLHelper.getBuddyIconURL(s,r,i)}},nsid:{readOnly:!0,defaultFn:function(e){return e}},isMe:{readOnly:!0,defaultFn:function(e){var t=this.appContext.getViewer();return t.signedIn&&t.nsid===e}},profileURL:{readOnly:!0,derivedBy:["pathAlias","nsid"],defaultFn:function(e){var t=this.getValue(e,"pathAlias");return t||(t=e),"/photos/"+t}},followsURL:{readOnly:!0,derivedBy:["pathAlias","nsid"],defaultFn:function(e){var t=this.getValue(e,"pathAlias");return t||(t=e),"/people/"+t+"/contacts"}},isContact:{defaultValue:!1,setter:function(t){return e.AttributeHelpers.coerceBoolean(t)}},isFriend:{defaultValue:!1,setter:function(t){return e.AttributeHelpers.coerceBoolean(t)}},isFamily:{defaultValue:!1,setter:function(t){return e.AttributeHelpers.coerceBoolean(t)}},followersCount:{defaultValue:0,setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},photosCount:{defaultValue:0,setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},videosCount:{defaultValue:0,setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},hometown:{defaultValue:"",setter:function(t){return e.AttributeHelpers.coerceString(t)}},isIgnored:{defaultValue:!1,setter:function(t){return e.AttributeHelpers.coerceBoolean(t)}},dateJoined:{validator:function(t){return e.AttributeHelpers.validateDate(t)},setter:function(t){return e.AttributeHelpers.coerceDate(t)},defaultFn:function(t){return e.moment()},serialize:function(e){return e.format("X")},deserialize:function(t){return e.moment(t,"X")}},isPro:{defaultValue:!1,setter:function(t){return e.AttributeHelpers.coerceBoolean(t)}}}})},"@VERSION@",{requires:["flickr-model-registry","attribute-helpers","url-helper"]});
YUI.add("flickr-people-search-fetcher",function(e,t){"use strict";function n(t){t||(t={});var n;return n={username:t.username||t.text,exact:t.exact||0,extras:"path_alias,rev_ignored,is_pro",per_page:t.perPage||100,page:t.page||1},t.loadFullContact&&(t.userId&&(n.user_id=t.userId),n.extras+=",location,rev_contact_count,use_vespa,date_joined",n.show_more=1),n=e.merge(n,t),delete n.text,delete n.userId,delete n.id,n}function r(e,t){var n=e[0],r=e[1],i;return i={people:[],pages:n.people.pages},n.people&&n.people.person&&n.people.person.forEach(function(e){i.people.push(r.addOrUpdate({id:e.nsid,username:e.username,realname:e.realname,iconfarm:e.iconfarm,iconserver:e.iconserver,pathAlias:e.pathAlias}))}),i}function i(e,t){var n=e[0],r=e[1],i=e[2],s=e[3],o={},u=[],a,f;n.people.person.forEach(function(e){o={id:e.nsid,username:e.username,realname:e.realname,iconfarm:e.iconfarm,iconserver:e.iconserver,pathAlias:e.pathAlias,isContact:e.contact,isFriend:e.friend,isFamily:e.family,photosCount:e.publicPhotosCount,videosCount:e.videoCount,followersCount:e.revContactCount,isIgnored:e.revIgnored,dateJoined:e.date_joined,isPro:e.is_pro},e.city&&e.country?o.hometown=e.city+", "+e.country:e.city?o.hometown=e.city:e.country&&(o.hometown=e.country),u.push(r.addOrUpdate(o)),s&&s.addOrUpdate(o)}),a={perPage:n.people.per_page,page:n.people.page||1,pageContent:u,totalItems:n.people.total,totalPages:n.people.pages},n.people.maxAllowedResults&&(a.totalItems=Math.min(n.people.maxAllowedResults,n.people.total)),n.people.maxAllowedPages&&(a.totalPages=Math.min(n.people.maxAllowedPages,n.people.pages));if(f)for(f=a.pageContent.length;f<a.perPage;f++)a.pageContent.push(!1);return i.addOrUpdate({id:t.id,contacts:a,totalItems:n.people.total,totalPages:a.totalPages,username:t.username,userId:t.userId}),u}function s(n,r){var i=this,s=this._processParams(n),o=null;return s.username||(n.emptyQuery=!0),n.loadFullContact?o=e.Promise.all([n.emptyQuery?e.Promise.resolve({people:{person:[]}}):r.callAPI("flickr.people.search",s),r.getModelRegistry("search-contact-models"),r.getModelRegistry("search-contacts-models"),r.getModelRegistry("person-relationship-models")]).then(function(e){return i._processFullResponse(e,n)},function(e){throw e.code===2&&e.message==="Photo not in people search"&&(e.notInContext=!0),e}).then(null,e.FetcherErrorLogger(t)):o=e.Promise.all([r.callAPI("flickr.people.search",s),r.getModelRegistry("contact-models")]).then(function(e){return i._processResponse(e,n)},function(e){throw e.code===2&&e.message==="Photo not in people search"&&(e.notInContext=!0),e}).then(null,e.FetcherErrorLogger(t)),o}e.namespace("ListFetchers")["flickr-people-search"]={run:s,_processParams:n,_processResponse:r,_processFullResponse:i}},"@VERSION@",{requires:["api-helper","flickr-promise"],optional:["contact-models","search-contact-models","person-relationship-models"]});
YUI.add("search-contacts-models",function(e){"use strict";function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return t.loadFullContact=!0,e.ListFetchers["flickr-people-search"].run(t,this.appContext)}},attributes:{id:{},username:{},userId:{},loadFullContact:{getter:function(e,t){return!0}},contacts:{isCollection:!0,pageFetch:{listFetcher:e.ListFetchers["flickr-people-search"]}},totalItems:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}}}})},"@VERSION@",{requires:["attribute-helpers","flickr-model-registry","flickr-people-search-fetcher"]});
